import{a as Y}from"./chunk-GNMCPGL7.js";import{e as G,g as U,h as S,k as y}from"./chunk-KOI2BV3Z.js";import{a as le}from"./chunk-2E4ROZS3.js";import{a as ae}from"./chunk-GHT2MSXZ.js";import{a as ie,b as re,c as I}from"./chunk-7IAOR6SY.js";import{a as te,b as oe}from"./chunk-NN363JUB.js";import"./chunk-DYY3EQTI.js";import"./chunk-7AWYNYRD.js";import"./chunk-F4Q2XGET.js";import{a as ne}from"./chunk-FZSBK5LX.js";import{A as Z,C as $,D as ee,q as J,r as V,t as K,v as Q,z as X}from"./chunk-MMNBBZVP.js";import{Ab as F,Bb as l,Cb as h,Cd as H,Db as _,Fb as b,Gb as v,Ha as a,Hb as C,Jb as L,Kb as M,Ra as P,Rd as E,S as c,Sb as N,Td as O,Ub as W,Vb as R,Xa as D,Y as g,Z as f,cb as d,ea as T,fb as B,kb as o,lb as n,oc as z,qb as x,rc as A,sb as u,tb as m,tc as j,yd as q}from"./chunk-4EPYZPYR.js";var ge=()=>({width:"70vw"}),fe=r=>["/perfil-entrepreneur",r];function _e(r,p){if(r&1&&(o(0,"div",4)(1,"h2"),l(2),n(),o(3,"p")(4,"a",5),l(5),n()()()),r&2){let t=m();a(2),h((t.project==null?null:t.project.title)||"Texto T\xEDtulo do Projeto"),a(2),d("routerLink",M(3,fe,(t.project==null||t.project.entrepreneur==null?null:t.project.entrepreneur.id)||"1")),a(),_(" ",(t.project==null||t.project.entrepreneur==null?null:t.project.entrepreneur.companyName)||"Texto Empresa Anunciante"," ")}}function be(r,p){if(r&1){let t=x();o(0,"div",6)(1,"div",7)(2,"h3"),l(3,"Solu\xE7\xE3o ofertada"),n(),o(4,"input",8),C("ngModelChange",function(i){g(t);let s=m();return v(s.solutionTitle,i)||(s.solutionTitle=i),f(i)}),n()(),o(5,"div",7)(6,"h3"),l(7,"Valor cobrado"),n(),o(8,"p-inputNumber",9),C("ngModelChange",function(i){g(t);let s=m();return v(s.solutionValue,i)||(s.solutionValue=i),f(i)}),n()(),o(9,"div",10)(10,"button",11),u("click",function(){g(t);let i=m();return f(i.submitProposal())}),n(),o(11,"button",12),u("click",function(){g(t);let i=m();return f(i.close())}),n()()()}if(r&2){let t=m();a(4),b("ngModel",t.solutionTitle),a(4),b("ngModel",t.solutionValue),d("minFractionDigits",2)("maxFractionDigits",2)}}function ve(r,p){if(r&1){let t=x();o(0,"div",7)(1,"h3"),l(2,"Proposta enviada com sucesso"),n(),o(3,"p"),l(4,"Agradecemos o envio da sua proposta. Em breve a empresa poder\xE1 analis\xE1-la."),n(),o(5,"div",10)(6,"button",13),u("click",function(){g(t);let i=m();return f(i.close())}),n()()()}}var w=class r{constructor(){this.visible=!1;this.visibleChange=new T;this.project=null;this.submit=new T;this.solutionTitle="";this.solutionDescription="";this.solutionValue=null;this.submitted=!1}close(){this.submitted=!1,this.visible=!1,this.visibleChange.emit(!1)}submitProposal(){this.submit.emit({title:this.solutionTitle,description:this.solutionDescription,value:this.solutionValue}),this.submitted=!0}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=P({type:r,selectors:[["app-solution-proposal"]],inputs:{visible:"visible",project:"project"},outputs:{visibleChange:"visibleChange",submit:"submit"},decls:5,vars:8,consts:[["successTpl",""],["styleClass","solution-proposal-dialog",3,"visibleChange","visible","modal","closable"],["pTemplate","header"],["class","modal-content",4,"ngIf","ngIfElse"],[1,"modal-header"],[1,"link-empresa",3,"routerLink"],[1,"modal-content"],[1,"detail-card"],["pInputText","","placeholder","Informe o t\xEDtulo da solu\xE7\xE3o",3,"ngModelChange","ngModel"],["mode","currency","currency","BRL",3,"ngModelChange","ngModel","minFractionDigits","maxFractionDigits"],[1,"hero-actions"],["pButton","","label","Enviar solu\xE7\xE3o proposta",1,"p-button-rounded","btnComecar",3,"click"],["pButton","","label","Voltar",1,"p-button-text","btnVoltar",3,"click"],["pButton","","label","Fechar",1,"p-button-rounded","btnComecar",3,"click"]],template:function(t,e){if(t&1){let i=x();o(0,"p-dialog",1),C("visibleChange",function(k){return g(i),v(e.visible,k)||(e.visible=k),f(k)}),D(1,_e,6,5,"ng-template",2)(2,be,12,4,"div",3)(3,ve,7,0,"ng-template",null,0,R),n()}if(t&2){let i=F(4);B(L(7,ge)),b("visible",e.visible),d("modal",!0)("closable",!0),a(2),d("ngIf",!e.submitted)("ngIfElse",i)}},dependencies:[j,z,Z,J,K,Q,re,ie,H,ee,$,oe,te,O,E,y,S],styles:[".modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#111930}.modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0369a1}.detail-card[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);border-radius:12px;padding:1.5rem;margin-bottom:1rem}.detail-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-bottom:50px}.hero-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:1.5rem}.btnComecar[_ngcontent-%COMP%]{padding:15px 100px}.btnVoltar[_ngcontent-%COMP%]{padding:15px 100px;margin-right:20px;color:#111930;border-radius:25px;border-color:#111930;font-weight:800}[_nghost-%COMP%]     .solution-proposal-dialog .p-dialog-header, [_nghost-%COMP%]     .solution-proposal-dialog .p-dialog-content, [_nghost-%COMP%]     .solution-proposal-dialog .p-dialog-footer{background-color:#f4f1f1;border-radius:10px}[_nghost-%COMP%]     .solution-proposal-dialog .p-dialog-content{background-color:#f4f1f1}"]})}};var Ce=r=>["/perfil-entrepreneur",r],se=class r{constructor(){this.route=c(G);this.router=c(U);this.projectService=c(ae);this.messageService=c(q);this.translationService=c(ne);this.authService=c(Y);this.applicationService=c(le);this.formBuilder=c(X);this.project=null;this.skills=[];this.deadline=null;this.loading=!1;this.currentYear=new Date().getFullYear();this.selectedProjectId="";this.proposalVisible=!1}ngOnInit(){this.applicationForm=this.formBuilder.group({idea:["",[I(),V.maxLength(300)]],value:["",[I(),V.pattern(/^\d+(\.\d{1,2})?$/)]]}),this.loadProjectById(this.route.snapshot.paramMap.get("id")||""),this.selectedProjectId=this.route.snapshot.paramMap.get("id")}loadProjectById(p){this.loading=!0,this.projectService.getById(p).subscribe({next:t=>{this.project=t,this.loading=!1},error:t=>{console.error("Erro ao carregar project:",t),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("project.default.errorLoad")}),this.loading=!1}})}goBack(){this.router.navigate(["/projects"])}openProposalModal(){this.proposalVisible=!0}onSubmitProposal(p){let t=this.authService.getCurrentUser()?.sub,e=this.selectedProjectId,i={idea:p.title,value:p.value||0,idProject:e||""};this.applicationService.create(i).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Sucesso",detail:"Aplica\xE7\xE3o enviada com sucesso!"}),this.proposalVisible=!1},error:s=>{this.messageService.add({severity:"error",summary:"Erro",detail:s.error?.message||"Falha ao enviar aplica\xE7\xE3o."})}})}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=P({type:r,selectors:[["app-project-detail"]],decls:30,vars:13,consts:[[1,"hero","slogan"],[1,"container"],[1,"link-empresa",3,"routerLink"],[1,"project-detail"],[1,"detail-card"],[1,"hero-actions"],[1,"btnVoltar","cursor-pointer",3,"click"],["pButton","","label","Tenho Interesse",1,"p-button-rounded","btnComecar",3,"click"],[3,"visibleChange","submit","visible","project"]],template:function(t,e){t&1&&(o(0,"section",0)(1,"div",1)(2,"h1"),l(3),n(),o(4,"p")(5,"a",2),l(6),n()()()(),o(7,"section",3)(8,"div",1)(9,"div",4)(10,"h3"),l(11,"Descri\xE7\xE3o do Projeto"),n(),o(12,"p"),l(13),n()(),o(14,"div",4)(15,"h3"),l(16,"Habilidades Necess\xE1rias"),n(),o(17,"p"),l(18),n()(),o(19,"div",4)(20,"h3"),l(21,"Prazo Limite"),n(),o(22,"p"),l(23),N(24,"date"),n()(),o(25,"div",5)(26,"button",6),u("click",function(){return e.goBack()}),l(27,"Voltar"),n(),o(28,"button",7),u("click",function(){return e.openProposalModal()}),n()()()(),o(29,"app-solution-proposal",8),C("visibleChange",function(s){return v(e.proposalVisible,s)||(e.proposalVisible=s),s}),u("submit",function(s){return e.onSubmitProposal(s)}),n()),t&2&&(a(3),h((e.project==null?null:e.project.title)||"T\xEDtulo do Projeto"),a(2),d("routerLink",M(11,Ce,(e.project==null||e.project.entrepreneur==null?null:e.project.entrepreneur.id)||"1")),a(),_(" ",(e.project==null||e.project.entrepreneur==null?null:e.project.entrepreneur.companyName)||"Empresa n\xE3o informada"," "),a(7),_(" ",(e.project==null?null:e.project.description)||"Texto descritivo do projeto n\xE3o informado."," "),a(5),_(" ",(e.project==null?null:e.project.requirements)||"Texto descritivo do projeto n\xE3o informado."," "),a(5),h(e.project!=null&&e.project.deadLine?W(24,8,e.project==null?null:e.project.deadLine,"dd/MM/yyyy"):"Prazo n\xE3o informado."),a(6),b("visible",e.proposalVisible),d("project",e.project))},dependencies:[j,A,y,S,O,E,w],styles:['@charset "UTF-8";.header[_ngcontent-%COMP%]{background:var(--surface-card);border-bottom:1px solid var(--border-color)}.header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 2rem}.logo[_ngcontent-%COMP%]{height:40px;border-radius:6px}.nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 .75rem;color:#111930;font-size:larger;font-weight:600;text-decoration:none}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.hero[_ngcontent-%COMP%]{background-color:#111930;color:#fff;padding:4rem 2rem;text-align:center}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem;color:#fff}.hero-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:30px}.project-detail[_ngcontent-%COMP%]{background-color:#f4f1f1;padding:30px}.detail-card[_ngcontent-%COMP%]{border:1px solid var(--border-color);border-radius:12px;padding:1.5rem;background-color:#fff;margin-bottom:1rem}.detail-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#0369a1}.detail-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000000c5}.skills[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.skill[_ngcontent-%COMP%]{background-color:#f59e0b;color:#111930;border-radius:9999px;padding:.25rem .75rem;font-weight:600}[_nghost-%COMP%]{display:block;background-color:#f4f1f1;min-height:100vh}.footer[_ngcontent-%COMP%]{background-color:#111930;display:flex;flex-direction:column;align-items:center;text-align:center;padding:20px;position:fixed;bottom:0;left:0;width:100%;z-index:100}.footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.footer-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 .5rem;color:var(--text-color-secondary);font-size:larger;font-weight:600;text-decoration:none;text-align:center}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:.75rem;text-align:center;margin-top:30px}.btnComecar[_ngcontent-%COMP%]{padding:15px 100px}.btnVoltar[_ngcontent-%COMP%]{padding:15px 100px;margin-right:20px;color:#111930;border-radius:25px;border-color:#111930;font-weight:600}.btnRegistrar[_ngcontent-%COMP%]{padding:10px 20px}']})}};export{se as ProjectDetailComponent};
