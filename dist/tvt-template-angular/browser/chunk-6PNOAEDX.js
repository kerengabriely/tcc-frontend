import{a as we}from"./chunk-H5N62M2K.js";import{a as ke}from"./chunk-CP4DFNNT.js";import{a as de,c as ue,d as ge,e as _e,f as fe,g as be,h as he,i as Me,j as xe,k as Oe,l as Pe,m as Ae,n as Se,o as ye,p as Be}from"./chunk-BIOQ7WD4.js";import{a as Ce,b as ve,c as Te}from"./chunk-7IAOR6SY.js";import{b as se}from"./chunk-NN363JUB.js";import{j as ae,k as oe,l as le,m as ce}from"./chunk-Y2EBMB6I.js";import"./chunk-DYY3EQTI.js";import{a as te,b as ne,c as ie,d as re}from"./chunk-OL42OIXF.js";import"./chunk-7AWYNYRD.js";import"./chunk-F4Q2XGET.js";import{a as me}from"./chunk-U2I4MTHT.js";import{a as pe}from"./chunk-FZSBK5LX.js";import{a as Z}from"./chunk-PMWQWODE.js";import{a as L,b as z}from"./chunk-6WLY72XZ.js";import{A as X,B as Y,C as $,D as ee,q as j,r as q,t as G,u as W,v as U,w as H,x as J,y as K,z as Q}from"./chunk-MMNBBZVP.js";import{Bb as u,Cb as _,Cd as V,Db as O,Fb as P,Gb as A,Ha as o,Hb as S,Ib as E,Jb as x,Ra as T,S as v,Sb as l,Sd as N,Tb as c,Td as R,Xa as h,Y as f,Z as b,bb as w,cb as p,fb as k,kb as i,lb as r,mb as g,nc as F,oc as I,qb as M,sb as C,tb as d,tc as D,ud as y,yd as B}from"./chunk-4EPYZPYR.js";var Fe=()=>[5,10,20,50],Ie=()=>({width:"450px"}),De=()=>[1,2,3,4,5];function Ve(n,e){n&1&&(i(0,"div",19)(1,"h2"),u(2),l(3,"translate"),r(),i(4,"p",20),u(5),l(6,"translate"),r()()),n&2&&(o(2),_(c(3,2,"business-area.default.title")),o(3),_(c(6,4,"business-area.default.description")))}function Le(n,e){if(n&1){let t=M();i(0,"p-button",21),l(1,"translate"),C("onClick",function(){f(t);let a=d();return b(a.newBusinessArea())}),r()}n&2&&p("label",c(1,1,"business-area.default.new"))}function ze(n,e){if(n&1){let t=M();i(0,"div",22)(1,"p-iconfield"),g(2,"p-inputicon",23),i(3,"input",24),l(4,"translate"),S("ngModelChange",function(a){f(t);let m=d();return A(m.searchTerm,a)||(m.searchTerm=a),b(a)}),C("ngModelChange",function(){f(t);let a=d();return b(a.onSearch())}),r()()()}if(n&2){let t=d();o(3),p("placeholder",c(4,2,"common.search")),P("ngModel",t.searchTerm)}}function Ne(n,e){n&1&&(i(0,"tr")(1,"th",25),u(2),l(3,"translate"),g(4,"p-sortIcon",26),r(),i(5,"th",27),u(6),l(7,"translate"),r()()),n&2&&(o(2),O(" ",c(3,2,"business-area.name")," "),o(4),_(c(7,4,"common.actions")))}function Re(n,e){if(n&1){let t=M();i(0,"tr")(1,"td"),u(2),r(),i(3,"td",28)(4,"div",29)(5,"p-button",30),l(6,"translate"),C("onClick",function(){let a=f(t).$implicit,m=d();return b(m.edit(a))}),r(),i(7,"p-button",31),l(8,"translate"),C("onClick",function(){let a=f(t).$implicit,m=d();return b(m.confirmDelete(a))}),r()()()()}if(n&2){let t=e.$implicit;o(2),_(t.name),o(3),p("text",!0)("pTooltip",c(6,5,"common.edit")),o(2),p("text",!0)("pTooltip",c(8,7,"common.delete"))}}function je(n,e){n&1&&(i(0,"tr")(1,"td"),g(2,"div",33),r(),i(3,"td",28)(4,"div",29),g(5,"div",34)(6,"div",34),r()()())}function qe(n,e){n&1&&h(0,je,7,0,"tr",32),n&2&&p("ngForOf",x(1,De))}function Ge(n,e){n&1&&(i(0,"tr")(1,"td",35)(2,"div",36),g(3,"i",37),i(4,"p"),u(5),l(6,"translate"),r()()()()),n&2&&(o(),w("colspan",2),o(4),_(c(6,2,"business-area.default.empty")))}function We(n,e){n&1&&(i(0,"small"),u(1),l(2,"translate"),r()),n&2&&(o(),_(c(2,1,"common.inputRequired")))}function Ue(n,e){n&1&&(i(0,"small"),u(1),l(2,"translate"),r()),n&2&&(o(),_(c(2,1,"common.maxLengthError")))}function He(n,e){if(n&1&&(i(0,"div",38),h(1,We,3,3,"small",39)(2,Ue,3,3,"small",39),r()),n&2){let t,s,a=d();o(),p("ngIf",(t=a.businessAreaForm.get("name"))==null?null:t.hasError("notBlank")),o(),p("ngIf",(s=a.businessAreaForm.get("name"))==null?null:s.hasError("maxlength"))}}function Je(n,e){if(n&1){let t=M();i(0,"div",40)(1,"p-button",41),l(2,"translate"),C("onClick",function(){f(t);let a=d();return b(a.closeDialog())}),r(),i(3,"p-button",42),l(4,"translate"),C("onClick",function(){f(t);let a=d();return b(a.save())}),r()()}if(n&2){let t=d();o(),p("label",c(2,4,"common.cancel")),o(2),p("label",c(4,6,"common.save"))("loading",t.loading)("disabled",t.businessAreaForm.invalid)}}var Ee=class n{constructor(){this.businessAreaService=v(we);this.entrepreneurService=v(ke);this.confirmationService=v(y);this.messageService=v(B);this.fb=v(Q);this.translationService=v(pe);this.businessAreas=[];this.filteredBusinessAreas=[];this.selectedBusinessArea=null;this.loading=!1;this.entrepreneurOptions=[];this.rowsPerPage=10;this.searchTerm="";this.sortField="";this.sortOrder=1;this.displayDialog=!1;this.isEditing=!1}ngOnInit(){this.businessAreaForm=this.fb.group({name:["",[Te(),q.maxLength(100)]],entrepreneurs:[[]]}),this.loadBusinessArea(),this.loadEntrepreneurOptions()}loadBusinessArea(){this.businessAreas=[],this.filteredBusinessAreas=[],this.loading=!0,this.businessAreaService.list().subscribe({next:e=>{this.businessAreas=e,this.filteredBusinessAreas=[...e],this.loading=!1},error:e=>{console.error("Erro ao carregar businessAreas:",e),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("business-area.default.errorLoadList")}),this.loading=!1}})}newBusinessArea(){this.businessAreaForm.reset({name:"",entrepreneurs:[]}),this.isEditing=!1,this.displayDialog=!0}edit(e){this.businessAreaForm.setValue({name:e.name||"",entrepreneurs:e.entrepreneurs?e.entrepreneurs.map(t=>t.id):[]}),this.selectedBusinessArea=e,this.isEditing=!0,this.displayDialog=!0}save(){if(this.businessAreaForm.invalid){this.messageService.add({severity:"warn",summary:this.translationService.translate("common.warnTitle"),detail:this.translationService.translate("common.requiredFields")});return}this.loading=!0,this.businessAreas=[],this.filteredBusinessAreas=[];let e=this.businessAreaForm.value;e.entrepreneurs&&Array.isArray(e.entrepreneurs)&&(e.entrepreneurs=e.entrepreneurs.map(t=>({id:t}))),this.isEditing&&this.selectedBusinessArea?.id?this.businessAreaService.update(this.selectedBusinessArea.id,e).subscribe({next:t=>{this.messageService.add({severity:"success",summary:this.translationService.translate("common.successTitle"),detail:this.translationService.translate("business-area.default.successUpdate")}),this.closeDialog(),this.loadBusinessArea()},error:t=>{console.error("Erro ao atualizar businessArea:",t),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("business-area.default.errorUpdate")}),this.loading=!1}}):this.businessAreaService.create(e).subscribe({next:t=>{this.messageService.add({severity:"success",summary:this.translationService.translate("common.successTitle"),detail:this.translationService.translate("business-area.default.successCreate")}),this.closeDialog(),this.loadBusinessArea()},error:t=>{console.error("Erro ao criar businessArea:",t),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("business-area.default.errorCreate")}),this.loading=!1}})}confirmDelete(e){let t=this.translationService.translate("business-area.default.confirmDeleteMessage");this.confirmationService.confirm({message:String(t).replace("{name}",this.getBusinessAreaDisplayText(e)),header:this.translationService.translate("business-area.default.confirmDeleteTitle"),icon:"pi pi-exclamation-triangle",acceptLabel:this.translationService.translate("common.accept"),rejectLabel:this.translationService.translate("common.reject"),accept:()=>{this.delete(e)}})}delete(e){e.id&&(this.loading=!0,this.businessAreas=[],this.filteredBusinessAreas=[],this.businessAreaService.delete(e.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:this.translationService.translate("common.successTitle"),detail:this.translationService.translate("business-area.default.successDelete")}),this.loadBusinessArea()},error:t=>{console.error("Erro ao excluir businessArea:",t),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("business-area.default.errorDelete")}),this.loading=!1}}))}closeDialog(){this.displayDialog=!1,this.selectedBusinessArea=null,this.businessAreaForm.reset({name:"",entrepreneurs:[]})}onSearch(){if(!this.searchTerm.trim()){this.filteredBusinessAreas=[...this.businessAreas];return}let e=this.searchTerm.toLowerCase().trim();this.filteredBusinessAreas=this.businessAreas.filter(t=>t.name?.toLowerCase().includes(e)||!1)}clearSearch(){this.searchTerm="",this.filteredBusinessAreas=[...this.businessAreas]}onSort(e){this.sortField=e.field,this.sortOrder=e.order}getBusinessAreaDisplayText(e){return e.name||e.id?.toString()||"ID n\xE3o dispon\xEDvel"}loadEntrepreneurOptions(){this.entrepreneurService.list().subscribe({next:e=>{this.entrepreneurOptions=e.map(t=>({id:t.id,name:t.name||t.id?.toString()}))},error:e=>{console.error("Erro ao carregar op\xE7\xF5es de entrepreneur:",e),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("entrepreneur.errorLoadOptions")})}})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=T({type:n,selectors:[["app-business-area"]],features:[E([y,B])],decls:32,vars:43,consts:[[1,"business-area-container"],["pTemplate","header"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","center"],["scrollHeight","350px","styleClass","p-datatable-striped","currentPageReportTemplate","{first} - {last} de {totalRecords} registros",3,"onSort","value","loading","scrollable","sortField","sortOrder","paginator","rows","totalRecords","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","body"],["pTemplate","loadingbody"],["pTemplate","emptymessage"],[3,"visibleChange","header","visible","modal","draggable","resizable"],[1,"dialog-content"],[3,"formGroup"],[1,"field"],["for","name"],["id","name","type","text","pInputText","","formControlName","name",1,"w-full",3,"placeholder"],["class","input-error",4,"ngIf"],["for","entrepreneurs"],["id","entrepreneurs","formControlName","entrepreneurs","optionLabel","name","optionValue","id","appendTo","body","filterBy","name","selectedItemsLabel","{0} entrepreneur selecionados",1,"w-full",3,"options","filter","placeholder","showToggleAll","showHeader","maxSelectedLabels"],["pTemplate","footer"],[1,"card-header"],[1,"card-subtitle"],["icon","pi pi-plus",3,"onClick","label"],[1,"search-container"],[1,"pi","pi-search"],["type","text","pInputText","",3,"ngModelChange","placeholder","ngModel"],["pSortableColumn","name"],["field","name"],[2,"width","120px","text-align","right"],[2,"text-align","right"],[1,"action-buttons"],["icon","pi pi-pencil","severity","info","size","small",3,"onClick","text","pTooltip"],["icon","pi pi-trash","severity","danger","size","small",3,"onClick","text","pTooltip"],[4,"ngFor","ngForOf"],[1,"skeleton-text"],[1,"skeleton-button"],[1,"text-center"],[1,"empty-state"],[1,"pi","pi-list","empty-icon"],[1,"input-error"],[4,"ngIf"],[1,"dialog-footer"],["icon","pi pi-times","variant","outlined",3,"onClick","label"],["icon","pi pi-check",3,"onClick","label","loading","disabled"]],template:function(t,s){if(t&1&&(i(0,"div",0)(1,"p-card"),h(2,Ve,7,6,"ng-template",1),i(3,"p-toolbar",2),h(4,Le,2,3,"ng-template",3)(5,ze,5,4,"ng-template",4),r(),i(6,"p-table",5),C("onSort",function(m){return s.onSort(m)}),h(7,Ne,8,6,"ng-template",1)(8,Re,9,9,"ng-template",6)(9,qe,1,2,"ng-template",7)(10,Ge,7,4,"ng-template",8),r()(),i(11,"p-dialog",9),l(12,"translate"),l(13,"translate"),S("visibleChange",function(m){return A(s.displayDialog,m)||(s.displayDialog=m),m}),i(14,"div",10)(15,"form",11)(16,"div",12)(17,"label",13),u(18),l(19,"translate"),r(),g(20,"input",14),l(21,"translate"),h(22,He,3,2,"div",15),r(),i(23,"div",12)(24,"label",16),u(25),l(26,"translate"),r(),g(27,"p-multiselect",17),l(28,"translate"),r()()(),h(29,Je,5,8,"ng-template",18),r(),g(30,"p-toast")(31,"p-confirmDialog"),r()),t&2){let a;p("@pageAnimation",void 0),o(6),p("value",s.filteredBusinessAreas)("loading",s.loading)("scrollable",!0)("sortField",s.sortField)("sortOrder",s.sortOrder)("paginator",!0)("rows",s.rowsPerPage)("totalRecords",s.filteredBusinessAreas.length)("rowsPerPageOptions",x(41,Fe))("showCurrentPageReport",!0),o(5),k(x(42,Ie)),p("header",s.isEditing?c(12,29,"business-area.default.edit"):c(13,31,"business-area.default.new")),P("visible",s.displayDialog),p("modal",!0)("draggable",!1)("resizable",!1),o(4),p("formGroup",s.businessAreaForm),o(3),O("",c(19,33,"business-area.name")," *"),o(2),p("placeholder",c(21,35,"common.enterText")),o(2),p("ngIf",((a=s.businessAreaForm.get("name"))==null?null:a.invalid)&&((a=s.businessAreaForm.get("name"))==null?null:a.touched)),o(3),_(c(26,37,"business-area.entrepreneur")),o(2),p("options",s.entrepreneurOptions)("filter",!0)("placeholder",c(28,39,"business-area.selectEntrepreneur"))("showToggleAll",!0)("showHeader",!0)("maxSelectedLabels",3)}},dependencies:[D,F,I,X,H,j,G,W,U,Y,J,K,he,_e,V,fe,be,R,N,ve,Ce,ee,$,ue,xe,Me,Pe,Oe,ce,le,Se,Ae,z,L,ye,Be,ge,me,ne,te,re,ie,se,de,oe,ae],styles:[".business-area-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1200px;margin:0 auto}.business-area-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid var(--border-color);background:var(--surface-b);border-radius:13px 13px 0 0}.business-area-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-color);font-size:1.5rem;font-weight:600}.business-area-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-subtitle[_ngcontent-%COMP%]{margin:0;color:var(--text-color-secondary);font-size:.9rem}.business-area-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.business-area-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{min-width:300px}.business-area-container[_ngcontent-%COMP%]   .business-area-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.business-area-container[_ngcontent-%COMP%]   .business-area-info[_ngcontent-%COMP%]   .business-area-icon[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.1rem}.business-area-container[_ngcontent-%COMP%]   .business-area-info[_ngcontent-%COMP%]   .business-area-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-color)}.business-area-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-end}.business-area-container[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--text-color-muted);font-style:italic}.business-area-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:var(--text-color-secondary)}.business-area-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-color-muted);margin-bottom:1rem;display:block}.business-area-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.1rem}.business-area-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.business-area-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-color);font-size:.9rem}.business-area-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .business-area-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%], .business-area-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   p-select[_ngcontent-%COMP%]{width:100%}.business-area-container[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding-top:1rem}.business-area-container[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%], .business-area-container[_ngcontent-%COMP%]   .skeleton-tag[_ngcontent-%COMP%], .business-area-container[_ngcontent-%COMP%]   .skeleton-button[_ngcontent-%COMP%], .business-area-container[_ngcontent-%COMP%]   .skeleton-icon[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--surface-c) 25%,var(--surface-d) 50%,var(--surface-c) 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:4px}.business-area-container[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%]{height:16px;width:100%}.business-area-container[_ngcontent-%COMP%]   .skeleton-text.skeleton-name[_ngcontent-%COMP%]{width:120px}.business-area-container[_ngcontent-%COMP%]   .skeleton-text.skeleton-email[_ngcontent-%COMP%]{width:160px}.business-area-container[_ngcontent-%COMP%]   .skeleton-tag[_ngcontent-%COMP%]{height:24px;width:60px;border-radius:12px}.business-area-container[_ngcontent-%COMP%]   .skeleton-tag.skeleton-small[_ngcontent-%COMP%]{width:30px}.business-area-container[_ngcontent-%COMP%]   .skeleton-button[_ngcontent-%COMP%]{height:32px;width:32px;border-radius:6px}.business-area-container[_ngcontent-%COMP%]   .skeleton-icon[_ngcontent-%COMP%]{height:20px;width:20px;border-radius:50%;flex-shrink:0}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:-200% 0}to{background-position:200% 0}}.business-area-container[_ngcontent-%COMP%]   .input-error[_ngcontent-%COMP%]{color:#d32f2f;font-size:.85rem;margin-top:.25rem}@media (max-width: 768px){.business-area-container[_ngcontent-%COMP%]{padding:1rem}.business-area-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}.business-area-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{min-width:auto;width:100%}.business-area-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.business-area-container[_ngcontent-%COMP%]     .p-dialog{width:95vw!important;margin:1rem}.business-area-container[_ngcontent-%COMP%]     .p-toolbar{flex-direction:column;gap:1rem;align-items:stretch}.business-area-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-left, .business-area-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-right, .business-area-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-center{justify-content:center}}  .dark-theme .business-area-container .card-header{background:var(--surface-c);border-color:var(--border-color)}"],data:{animation:[Z]}})}};export{Ee as BusinessAreaComponent};
