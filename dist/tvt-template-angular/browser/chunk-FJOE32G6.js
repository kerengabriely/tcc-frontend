import{a as ke}from"./chunk-WBHDUJ7J.js";import{a as we}from"./chunk-3GLKYTBN.js";import{a as de,c as ge,d as ue,e as _e,f as fe,g as he,h as Ce,i as xe,j as Oe,k as Pe,l as be,m as Se,n as Ae,o as Ie,p as ye}from"./chunk-BIOQ7WD4.js";import{a as ve,b as Me,c as Te}from"./chunk-7IAOR6SY.js";import{b as ae}from"./chunk-NN363JUB.js";import{j as oe,k as se,l as le,m as ce}from"./chunk-Y2EBMB6I.js";import"./chunk-DYY3EQTI.js";import{a as te,b as ne,c as re,d as ie}from"./chunk-OL42OIXF.js";import"./chunk-7AWYNYRD.js";import"./chunk-F4Q2XGET.js";import{a as me}from"./chunk-U2I4MTHT.js";import{a as pe}from"./chunk-FZSBK5LX.js";import{a as Z}from"./chunk-PMWQWODE.js";import{a as L,b as z}from"./chunk-6WLY72XZ.js";import{A as X,B as Y,C as $,D as ee,q as j,r as q,t as G,u as W,v as U,w as H,x as J,y as K,z as Q}from"./chunk-MMNBBZVP.js";import{Bb as g,Cb as _,Cd as V,Db as P,Fb as b,Gb as S,Ha as s,Hb as A,Ib as E,Jb as O,Ra as T,S as M,Sb as l,Sd as N,Tb as c,Td as R,Xa as C,Y as f,Z as h,bb as w,cb as p,fb as k,kb as r,lb as i,mb as u,nc as F,oc as D,qb as x,sb as v,tb as d,tc as B,ud as I,yd as y}from"./chunk-4EPYZPYR.js";var Fe=()=>[5,10,20,50],De=()=>({width:"450px"}),Be=()=>[1,2,3,4,5];function Ve(n,e){n&1&&(r(0,"div",19)(1,"h2"),g(2),l(3,"translate"),i(),r(4,"p",20),g(5),l(6,"translate"),i()()),n&2&&(s(2),_(c(3,2,"interest-area.default.title")),s(3),_(c(6,4,"interest-area.default.description")))}function Le(n,e){if(n&1){let t=x();r(0,"p-button",21),l(1,"translate"),v("onClick",function(){f(t);let o=d();return h(o.newInterestArea())}),i()}n&2&&p("label",c(1,1,"interest-area.default.new"))}function ze(n,e){if(n&1){let t=x();r(0,"div",22)(1,"p-iconfield"),u(2,"p-inputicon",23),r(3,"input",24),l(4,"translate"),A("ngModelChange",function(o){f(t);let m=d();return S(m.searchTerm,o)||(m.searchTerm=o),h(o)}),v("ngModelChange",function(){f(t);let o=d();return h(o.onSearch())}),i()()()}if(n&2){let t=d();s(3),p("placeholder",c(4,2,"common.search")),b("ngModel",t.searchTerm)}}function Ne(n,e){n&1&&(r(0,"tr")(1,"th",25),g(2),l(3,"translate"),u(4,"p-sortIcon",26),i(),r(5,"th",27),g(6),l(7,"translate"),i()()),n&2&&(s(2),P(" ",c(3,2,"interest-area.name")," "),s(4),_(c(7,4,"common.actions")))}function Re(n,e){if(n&1){let t=x();r(0,"tr")(1,"td"),g(2),i(),r(3,"td",28)(4,"div",29)(5,"p-button",30),l(6,"translate"),v("onClick",function(){let o=f(t).$implicit,m=d();return h(m.edit(o))}),i(),r(7,"p-button",31),l(8,"translate"),v("onClick",function(){let o=f(t).$implicit,m=d();return h(m.confirmDelete(o))}),i()()()()}if(n&2){let t=e.$implicit;s(2),_(t.name),s(3),p("text",!0)("pTooltip",c(6,5,"common.edit")),s(2),p("text",!0)("pTooltip",c(8,7,"common.delete"))}}function je(n,e){n&1&&(r(0,"tr")(1,"td"),u(2,"div",33),i(),r(3,"td",28)(4,"div",29),u(5,"div",34)(6,"div",34),i()()())}function qe(n,e){n&1&&C(0,je,7,0,"tr",32),n&2&&p("ngForOf",O(1,Be))}function Ge(n,e){n&1&&(r(0,"tr")(1,"td",35)(2,"div",36),u(3,"i",37),r(4,"p"),g(5),l(6,"translate"),i()()()()),n&2&&(s(),w("colspan",2),s(4),_(c(6,2,"interest-area.default.empty")))}function We(n,e){n&1&&(r(0,"small"),g(1),l(2,"translate"),i()),n&2&&(s(),_(c(2,1,"common.inputRequired")))}function Ue(n,e){n&1&&(r(0,"small"),g(1),l(2,"translate"),i()),n&2&&(s(),_(c(2,1,"common.maxLengthError")))}function He(n,e){if(n&1&&(r(0,"div",38),C(1,We,3,3,"small",39)(2,Ue,3,3,"small",39),i()),n&2){let t,a,o=d();s(),p("ngIf",(t=o.interestAreaForm.get("name"))==null?null:t.hasError("notBlank")),s(),p("ngIf",(a=o.interestAreaForm.get("name"))==null?null:a.hasError("maxlength"))}}function Je(n,e){if(n&1){let t=x();r(0,"div",40)(1,"p-button",41),l(2,"translate"),v("onClick",function(){f(t);let o=d();return h(o.closeDialog())}),i(),r(3,"p-button",42),l(4,"translate"),v("onClick",function(){f(t);let o=d();return h(o.save())}),i()()}if(n&2){let t=d();s(),p("label",c(2,4,"common.cancel")),s(2),p("label",c(4,6,"common.save"))("loading",t.loading)("disabled",t.interestAreaForm.invalid)}}var Ee=class n{constructor(){this.interestAreaService=M(ke);this.studentService=M(we);this.confirmationService=M(I);this.messageService=M(y);this.fb=M(Q);this.translationService=M(pe);this.interestAreas=[];this.filteredInterestAreas=[];this.selectedInterestArea=null;this.loading=!1;this.studentOptions=[];this.rowsPerPage=10;this.searchTerm="";this.sortField="";this.sortOrder=1;this.displayDialog=!1;this.isEditing=!1}ngOnInit(){this.interestAreaForm=this.fb.group({name:["",[Te(),q.maxLength(100)]],students:[[]]}),this.loadInterestArea(),this.loadStudentOptions()}loadInterestArea(){this.interestAreas=[],this.filteredInterestAreas=[],this.loading=!0,this.interestAreaService.list().subscribe({next:e=>{this.interestAreas=e,this.filteredInterestAreas=[...e],this.loading=!1},error:e=>{console.error("Erro ao carregar interestAreas:",e),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("interest-area.default.errorLoadList")}),this.loading=!1}})}newInterestArea(){this.interestAreaForm.reset({name:"",students:[]}),this.isEditing=!1,this.displayDialog=!0}edit(e){this.interestAreaForm.setValue({name:e.name||"",students:e.students?e.students.map(t=>t.id):[]}),this.selectedInterestArea=e,this.isEditing=!0,this.displayDialog=!0}save(){if(this.interestAreaForm.invalid){this.messageService.add({severity:"warn",summary:this.translationService.translate("common.warnTitle"),detail:this.translationService.translate("common.requiredFields")});return}this.loading=!0,this.interestAreas=[],this.filteredInterestAreas=[];let e=this.interestAreaForm.value;e.students&&Array.isArray(e.students)&&(e.students=e.students.map(t=>({id:t}))),this.isEditing&&this.selectedInterestArea?.id?this.interestAreaService.update(this.selectedInterestArea.id,e).subscribe({next:t=>{this.messageService.add({severity:"success",summary:this.translationService.translate("common.successTitle"),detail:this.translationService.translate("interest-area.default.successUpdate")}),this.closeDialog(),this.loadInterestArea()},error:t=>{console.error("Erro ao atualizar interestArea:",t),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("interest-area.default.errorUpdate")}),this.loading=!1}}):this.interestAreaService.create(e).subscribe({next:t=>{this.messageService.add({severity:"success",summary:this.translationService.translate("common.successTitle"),detail:this.translationService.translate("interest-area.default.successCreate")}),this.closeDialog(),this.loadInterestArea()},error:t=>{console.error("Erro ao criar interestArea:",t),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("interest-area.default.errorCreate")}),this.loading=!1}})}confirmDelete(e){let t=this.translationService.translate("interest-area.default.confirmDeleteMessage");this.confirmationService.confirm({message:String(t).replace("{name}",this.getInterestAreaDisplayText(e)),header:this.translationService.translate("interest-area.default.confirmDeleteTitle"),icon:"pi pi-exclamation-triangle",acceptLabel:this.translationService.translate("common.accept"),rejectLabel:this.translationService.translate("common.reject"),accept:()=>{this.delete(e)}})}delete(e){e.id&&(this.loading=!0,this.interestAreas=[],this.filteredInterestAreas=[],this.interestAreaService.delete(e.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:this.translationService.translate("common.successTitle"),detail:this.translationService.translate("interest-area.default.successDelete")}),this.loadInterestArea()},error:t=>{console.error("Erro ao excluir interestArea:",t),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("interest-area.default.errorDelete")}),this.loading=!1}}))}closeDialog(){this.displayDialog=!1,this.selectedInterestArea=null,this.interestAreaForm.reset({name:"",students:[]})}onSearch(){if(!this.searchTerm.trim()){this.filteredInterestAreas=[...this.interestAreas];return}let e=this.searchTerm.toLowerCase().trim();this.filteredInterestAreas=this.interestAreas.filter(t=>t.name?.toLowerCase().includes(e)||!1)}clearSearch(){this.searchTerm="",this.filteredInterestAreas=[...this.interestAreas]}onSort(e){this.sortField=e.field,this.sortOrder=e.order}getInterestAreaDisplayText(e){return e.name||e.id?.toString()||"ID n\xE3o dispon\xEDvel"}loadStudentOptions(){this.studentService.list().subscribe({next:e=>{this.studentOptions=e.map(t=>({id:t.id,name:t.name||t.id?.toString()}))},error:e=>{console.error("Erro ao carregar op\xE7\xF5es de student:",e),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("student.errorLoadOptions")})}})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=T({type:n,selectors:[["app-interest-area"]],features:[E([I,y])],decls:32,vars:43,consts:[[1,"interest-area-container"],["pTemplate","header"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","center"],["scrollHeight","350px","styleClass","p-datatable-striped","currentPageReportTemplate","{first} - {last} de {totalRecords} registros",3,"onSort","value","loading","scrollable","sortField","sortOrder","paginator","rows","totalRecords","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","body"],["pTemplate","loadingbody"],["pTemplate","emptymessage"],[3,"visibleChange","header","visible","modal","draggable","resizable"],[1,"dialog-content"],[3,"formGroup"],[1,"field"],["for","name"],["id","name","type","text","pInputText","","formControlName","name",1,"w-full",3,"placeholder"],["class","input-error",4,"ngIf"],["for","students"],["id","students","formControlName","students","optionLabel","name","optionValue","id","appendTo","body","filterBy","name","selectedItemsLabel","{0} student selecionados",1,"w-full",3,"options","filter","placeholder","showToggleAll","showHeader","maxSelectedLabels"],["pTemplate","footer"],[1,"card-header"],[1,"card-subtitle"],["icon","pi pi-plus",3,"onClick","label"],[1,"search-container"],[1,"pi","pi-search"],["type","text","pInputText","",3,"ngModelChange","placeholder","ngModel"],["pSortableColumn","name"],["field","name"],[2,"width","120px","text-align","right"],[2,"text-align","right"],[1,"action-buttons"],["icon","pi pi-pencil","severity","info","size","small",3,"onClick","text","pTooltip"],["icon","pi pi-trash","severity","danger","size","small",3,"onClick","text","pTooltip"],[4,"ngFor","ngForOf"],[1,"skeleton-text"],[1,"skeleton-button"],[1,"text-center"],[1,"empty-state"],[1,"pi","pi-list","empty-icon"],[1,"input-error"],[4,"ngIf"],[1,"dialog-footer"],["icon","pi pi-times","variant","outlined",3,"onClick","label"],["icon","pi pi-check",3,"onClick","label","loading","disabled"]],template:function(t,a){if(t&1&&(r(0,"div",0)(1,"p-card"),C(2,Ve,7,6,"ng-template",1),r(3,"p-toolbar",2),C(4,Le,2,3,"ng-template",3)(5,ze,5,4,"ng-template",4),i(),r(6,"p-table",5),v("onSort",function(m){return a.onSort(m)}),C(7,Ne,8,6,"ng-template",1)(8,Re,9,9,"ng-template",6)(9,qe,1,2,"ng-template",7)(10,Ge,7,4,"ng-template",8),i()(),r(11,"p-dialog",9),l(12,"translate"),l(13,"translate"),A("visibleChange",function(m){return S(a.displayDialog,m)||(a.displayDialog=m),m}),r(14,"div",10)(15,"form",11)(16,"div",12)(17,"label",13),g(18),l(19,"translate"),i(),u(20,"input",14),l(21,"translate"),C(22,He,3,2,"div",15),i(),r(23,"div",12)(24,"label",16),g(25),l(26,"translate"),i(),u(27,"p-multiselect",17),l(28,"translate"),i()()(),C(29,Je,5,8,"ng-template",18),i(),u(30,"p-toast")(31,"p-confirmDialog"),i()),t&2){let o;p("@pageAnimation",void 0),s(6),p("value",a.filteredInterestAreas)("loading",a.loading)("scrollable",!0)("sortField",a.sortField)("sortOrder",a.sortOrder)("paginator",!0)("rows",a.rowsPerPage)("totalRecords",a.filteredInterestAreas.length)("rowsPerPageOptions",O(41,Fe))("showCurrentPageReport",!0),s(5),k(O(42,De)),p("header",a.isEditing?c(12,29,"interest-area.default.edit"):c(13,31,"interest-area.default.new")),b("visible",a.displayDialog),p("modal",!0)("draggable",!1)("resizable",!1),s(4),p("formGroup",a.interestAreaForm),s(3),P("",c(19,33,"interest-area.name")," *"),s(2),p("placeholder",c(21,35,"common.enterText")),s(2),p("ngIf",((o=a.interestAreaForm.get("name"))==null?null:o.invalid)&&((o=a.interestAreaForm.get("name"))==null?null:o.touched)),s(3),_(c(26,37,"interest-area.student")),s(2),p("options",a.studentOptions)("filter",!0)("placeholder",c(28,39,"interest-area.selectStudent"))("showToggleAll",!0)("showHeader",!0)("maxSelectedLabels",3)}},dependencies:[B,F,D,X,H,j,G,W,U,Y,J,K,Ce,_e,V,fe,he,R,N,Me,ve,ee,$,ge,Oe,xe,be,Pe,ce,le,Ae,Se,z,L,Ie,ye,ue,me,ne,te,ie,re,ae,de,se,oe],styles:[".interest-area-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1200px;margin:0 auto}.interest-area-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid var(--border-color);background:var(--surface-b);border-radius:13px 13px 0 0}.interest-area-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-color);font-size:1.5rem;font-weight:600}.interest-area-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-subtitle[_ngcontent-%COMP%]{margin:0;color:var(--text-color-secondary);font-size:.9rem}.interest-area-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.interest-area-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{min-width:300px}.interest-area-container[_ngcontent-%COMP%]   .interest-area-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.interest-area-container[_ngcontent-%COMP%]   .interest-area-info[_ngcontent-%COMP%]   .interest-area-icon[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.1rem}.interest-area-container[_ngcontent-%COMP%]   .interest-area-info[_ngcontent-%COMP%]   .interest-area-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-color)}.interest-area-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-end}.interest-area-container[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--text-color-muted);font-style:italic}.interest-area-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:var(--text-color-secondary)}.interest-area-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-color-muted);margin-bottom:1rem;display:block}.interest-area-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.1rem}.interest-area-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.interest-area-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-color);font-size:.9rem}.interest-area-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .interest-area-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%], .interest-area-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   p-select[_ngcontent-%COMP%]{width:100%}.interest-area-container[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding-top:1rem}.interest-area-container[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%], .interest-area-container[_ngcontent-%COMP%]   .skeleton-tag[_ngcontent-%COMP%], .interest-area-container[_ngcontent-%COMP%]   .skeleton-button[_ngcontent-%COMP%], .interest-area-container[_ngcontent-%COMP%]   .skeleton-icon[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--surface-c) 25%,var(--surface-d) 50%,var(--surface-c) 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:4px}.interest-area-container[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%]{height:16px;width:100%}.interest-area-container[_ngcontent-%COMP%]   .skeleton-text.skeleton-name[_ngcontent-%COMP%]{width:120px}.interest-area-container[_ngcontent-%COMP%]   .skeleton-text.skeleton-email[_ngcontent-%COMP%]{width:160px}.interest-area-container[_ngcontent-%COMP%]   .skeleton-tag[_ngcontent-%COMP%]{height:24px;width:60px;border-radius:12px}.interest-area-container[_ngcontent-%COMP%]   .skeleton-tag.skeleton-small[_ngcontent-%COMP%]{width:30px}.interest-area-container[_ngcontent-%COMP%]   .skeleton-button[_ngcontent-%COMP%]{height:32px;width:32px;border-radius:6px}.interest-area-container[_ngcontent-%COMP%]   .skeleton-icon[_ngcontent-%COMP%]{height:20px;width:20px;border-radius:50%;flex-shrink:0}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:-200% 0}to{background-position:200% 0}}.interest-area-container[_ngcontent-%COMP%]   .input-error[_ngcontent-%COMP%]{color:#d32f2f;font-size:.85rem;margin-top:.25rem}@media (max-width: 768px){.interest-area-container[_ngcontent-%COMP%]{padding:1rem}.interest-area-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}.interest-area-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{min-width:auto;width:100%}.interest-area-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.interest-area-container[_ngcontent-%COMP%]     .p-dialog{width:95vw!important;margin:1rem}.interest-area-container[_ngcontent-%COMP%]     .p-toolbar{flex-direction:column;gap:1rem;align-items:stretch}.interest-area-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-left, .interest-area-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-right, .interest-area-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-center{justify-content:center}}  .dark-theme .interest-area-container .card-header{background:var(--surface-c);border-color:var(--border-color)}"],data:{animation:[Z]}})}};export{Ee as InterestAreaComponent};
