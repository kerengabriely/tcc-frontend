import{a as Fe}from"./chunk-EKZ4KNBV.js";import{a as Ee}from"./chunk-3GLKYTBN.js";import{a as de,c as ge,d as ue,e as _e,f as fe,g as ke,h as he,i as ve,j as Me,k as xe,l as Oe,m as Pe,n as be,o as ye,p as Te}from"./chunk-BIOQ7WD4.js";import{a as Ce,b as Se,c as we}from"./chunk-7IAOR6SY.js";import{b as oe}from"./chunk-NN363JUB.js";import{j as re,k as ae,l as se,m as ce}from"./chunk-Y2EBMB6I.js";import"./chunk-DYY3EQTI.js";import{a as te,b as ie,c as ne,d as le}from"./chunk-OL42OIXF.js";import"./chunk-7AWYNYRD.js";import"./chunk-F4Q2XGET.js";import{a as me}from"./chunk-U2I4MTHT.js";import{a as pe}from"./chunk-FZSBK5LX.js";import{a as Z}from"./chunk-PMWQWODE.js";import{a as z,b as N}from"./chunk-6WLY72XZ.js";import{A as X,B as Y,C as $,D as ee,q as j,r as q,t as G,u as W,v as U,w as H,x as J,y as K,z as Q}from"./chunk-MMNBBZVP.js";import{Bb as g,Cb as _,Cd as L,Db as x,Fb as O,Gb as P,Ha as a,Hb as b,Ib as I,Jb as M,Ra as w,S,Sb as s,Sd as R,Tb as c,Td as A,Xa as h,Y as f,Z as k,bb as E,cb as p,fb as F,kb as n,lb as l,mb as u,nc as D,oc as B,qb as v,sb as C,tb as d,tc as V,ud as y,yd as T}from"./chunk-4EPYZPYR.js";var De=()=>[5,10,20,50],Be=()=>({width:"450px"}),Ve=()=>[1,2,3,4,5];function Le(i,e){i&1&&(n(0,"div",19)(1,"h2"),g(2),s(3,"translate"),l(),n(4,"p",20),g(5),s(6,"translate"),l()()),i&2&&(a(2),_(c(3,2,"skill.default.title")),a(3),_(c(6,4,"skill.default.description")))}function ze(i,e){if(i&1){let t=v();n(0,"p-button",21),s(1,"translate"),C("onClick",function(){f(t);let r=d();return k(r.newSkill())}),l()}i&2&&p("label",c(1,1,"skill.default.new"))}function Ne(i,e){if(i&1){let t=v();n(0,"div",22)(1,"p-iconfield"),u(2,"p-inputicon",23),n(3,"input",24),s(4,"translate"),b("ngModelChange",function(r){f(t);let m=d();return P(m.searchTerm,r)||(m.searchTerm=r),k(r)}),C("ngModelChange",function(){f(t);let r=d();return k(r.onSearch())}),l()()()}if(i&2){let t=d();a(3),p("placeholder",c(4,2,"common.search")),O("ngModel",t.searchTerm)}}function Re(i,e){i&1&&(n(0,"tr")(1,"th",25),g(2),s(3,"translate"),u(4,"p-sortIcon",26),l(),n(5,"th",27),g(6),s(7,"translate"),l()()),i&2&&(a(2),x(" ",c(3,2,"skill.name")," "),a(4),_(c(7,4,"common.actions")))}function Ae(i,e){if(i&1){let t=v();n(0,"tr")(1,"td"),g(2),l(),n(3,"td",28)(4,"div",29)(5,"p-button",30),s(6,"translate"),C("onClick",function(){let r=f(t).$implicit,m=d();return k(m.edit(r))}),l(),n(7,"p-button",31),s(8,"translate"),C("onClick",function(){let r=f(t).$implicit,m=d();return k(m.confirmDelete(r))}),l()()()()}if(i&2){let t=e.$implicit;a(2),_(t.name),a(3),p("text",!0)("pTooltip",c(6,5,"common.edit")),a(2),p("text",!0)("pTooltip",c(8,7,"common.delete"))}}function je(i,e){i&1&&(n(0,"tr")(1,"td"),u(2,"div",33),l(),n(3,"td",28)(4,"div",29),u(5,"div",34)(6,"div",34),l()()())}function qe(i,e){i&1&&h(0,je,7,0,"tr",32),i&2&&p("ngForOf",M(1,Ve))}function Ge(i,e){i&1&&(n(0,"tr")(1,"td",35)(2,"div",36),u(3,"i",37),n(4,"p"),g(5),s(6,"translate"),l()()()()),i&2&&(a(),E("colspan",2),a(4),_(c(6,2,"skill.default.empty")))}function We(i,e){i&1&&(n(0,"small"),g(1),s(2,"translate"),l()),i&2&&(a(),_(c(2,1,"common.inputRequired")))}function Ue(i,e){i&1&&(n(0,"small"),g(1),s(2,"translate"),l()),i&2&&(a(),_(c(2,1,"common.maxLengthError")))}function He(i,e){if(i&1&&(n(0,"div",38),h(1,We,3,3,"small",39)(2,Ue,3,3,"small",39),l()),i&2){let t,o,r=d();a(),p("ngIf",(t=r.skillForm.get("name"))==null?null:t.hasError("notBlank")),a(),p("ngIf",(o=r.skillForm.get("name"))==null?null:o.hasError("maxlength"))}}function Je(i,e){if(i&1){let t=v();n(0,"div",40)(1,"p-button",41),s(2,"translate"),C("onClick",function(){f(t);let r=d();return k(r.closeDialog())}),l(),n(3,"p-button",42),s(4,"translate"),C("onClick",function(){f(t);let r=d();return k(r.save())}),l()()}if(i&2){let t=d();a(),p("label",c(2,4,"common.cancel")),a(2),p("label",c(4,6,"common.save"))("loading",t.loading)("disabled",t.skillForm.invalid)}}var Ie=class i{constructor(){this.skillService=S(Fe);this.studentService=S(Ee);this.confirmationService=S(y);this.messageService=S(T);this.fb=S(Q);this.translationService=S(pe);this.skills=[];this.filteredSkills=[];this.selectedSkill=null;this.loading=!1;this.studentOptions=[];this.rowsPerPage=10;this.searchTerm="";this.sortField="";this.sortOrder=1;this.displayDialog=!1;this.isEditing=!1}ngOnInit(){this.skillForm=this.fb.group({name:["",[we(),q.maxLength(100)]],students:[[]]}),this.loadSkill(),this.loadStudentOptions()}loadSkill(){this.skills=[],this.filteredSkills=[],this.loading=!0,this.skillService.list().subscribe({next:e=>{this.skills=e,this.filteredSkills=[...e],this.loading=!1},error:e=>{console.error("Erro ao carregar skills:",e),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("skill.default.errorLoadList")}),this.loading=!1}})}newSkill(){this.skillForm.reset({name:"",students:[]}),this.isEditing=!1,this.displayDialog=!0}edit(e){this.skillForm.setValue({name:e.name||"",students:e.students?e.students.map(t=>t.id):[]}),this.selectedSkill=e,this.isEditing=!0,this.displayDialog=!0}save(){if(this.skillForm.invalid){this.messageService.add({severity:"warn",summary:this.translationService.translate("common.warnTitle"),detail:this.translationService.translate("common.requiredFields")});return}this.loading=!0,this.skills=[],this.filteredSkills=[];let e=this.skillForm.value;e.students&&Array.isArray(e.students)&&(e.students=e.students.map(t=>({id:t}))),this.isEditing&&this.selectedSkill?.id?this.skillService.update(this.selectedSkill.id,e).subscribe({next:t=>{this.messageService.add({severity:"success",summary:this.translationService.translate("common.successTitle"),detail:this.translationService.translate("skill.default.successUpdate")}),this.closeDialog(),this.loadSkill()},error:t=>{console.error("Erro ao atualizar skill:",t),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("skill.default.errorUpdate")}),this.loading=!1}}):this.skillService.create(e).subscribe({next:t=>{this.messageService.add({severity:"success",summary:this.translationService.translate("common.successTitle"),detail:this.translationService.translate("skill.default.successCreate")}),this.closeDialog(),this.loadSkill()},error:t=>{console.error("Erro ao criar skill:",t),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("skill.default.errorCreate")}),this.loading=!1}})}confirmDelete(e){let t=this.translationService.translate("skill.default.confirmDeleteMessage");this.confirmationService.confirm({message:String(t).replace("{name}",this.getSkillDisplayText(e)),header:this.translationService.translate("skill.default.confirmDeleteTitle"),icon:"pi pi-exclamation-triangle",acceptLabel:this.translationService.translate("common.accept"),rejectLabel:this.translationService.translate("common.reject"),accept:()=>{this.delete(e)}})}delete(e){e.id&&(this.loading=!0,this.skills=[],this.filteredSkills=[],this.skillService.delete(e.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:this.translationService.translate("common.successTitle"),detail:this.translationService.translate("skill.default.successDelete")}),this.loadSkill()},error:t=>{console.error("Erro ao excluir skill:",t),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("skill.default.errorDelete")}),this.loading=!1}}))}closeDialog(){this.displayDialog=!1,this.selectedSkill=null,this.skillForm.reset({name:"",students:[]})}onSearch(){if(!this.searchTerm.trim()){this.filteredSkills=[...this.skills];return}let e=this.searchTerm.toLowerCase().trim();this.filteredSkills=this.skills.filter(t=>t.name?.toLowerCase().includes(e)||!1)}clearSearch(){this.searchTerm="",this.filteredSkills=[...this.skills]}onSort(e){this.sortField=e.field,this.sortOrder=e.order}getSkillDisplayText(e){return e.name||e.id?.toString()||"ID n\xE3o dispon\xEDvel"}loadStudentOptions(){this.studentService.list().subscribe({next:e=>{this.studentOptions=e.map(t=>({id:t.id,name:t.name||t.id?.toString()}))},error:e=>{console.error("Erro ao carregar op\xE7\xF5es de student:",e),this.messageService.add({severity:"error",summary:this.translationService.translate("common.errorTitle"),detail:this.translationService.translate("student.errorLoadOptions")})}})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=w({type:i,selectors:[["app-skill"]],features:[I([y,T])],decls:32,vars:43,consts:[[1,"skill-container"],["pTemplate","header"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","center"],["scrollHeight","350px","styleClass","p-datatable-striped","currentPageReportTemplate","{first} - {last} de {totalRecords} registros",3,"onSort","value","loading","scrollable","sortField","sortOrder","paginator","rows","totalRecords","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","body"],["pTemplate","loadingbody"],["pTemplate","emptymessage"],[3,"visibleChange","header","visible","modal","draggable","resizable"],[1,"dialog-content"],[3,"formGroup"],[1,"field"],["for","name"],["id","name","type","text","pInputText","","formControlName","name",1,"w-full",3,"placeholder"],["class","input-error",4,"ngIf"],["for","students"],["id","students","formControlName","students","optionLabel","name","optionValue","id","appendTo","body","filterBy","name","selectedItemsLabel","{0} student selecionados",1,"w-full",3,"options","filter","placeholder","showToggleAll","showHeader","maxSelectedLabels"],["pTemplate","footer"],[1,"card-header"],[1,"card-subtitle"],["icon","pi pi-plus",3,"onClick","label"],[1,"search-container"],[1,"pi","pi-search"],["type","text","pInputText","",3,"ngModelChange","placeholder","ngModel"],["pSortableColumn","name"],["field","name"],[2,"width","120px","text-align","right"],[2,"text-align","right"],[1,"action-buttons"],["icon","pi pi-pencil","severity","info","size","small",3,"onClick","text","pTooltip"],["icon","pi pi-trash","severity","danger","size","small",3,"onClick","text","pTooltip"],[4,"ngFor","ngForOf"],[1,"skeleton-text"],[1,"skeleton-button"],[1,"text-center"],[1,"empty-state"],[1,"pi","pi-list","empty-icon"],[1,"input-error"],[4,"ngIf"],[1,"dialog-footer"],["icon","pi pi-times","variant","outlined",3,"onClick","label"],["icon","pi pi-check",3,"onClick","label","loading","disabled"]],template:function(t,o){if(t&1&&(n(0,"div",0)(1,"p-card"),h(2,Le,7,6,"ng-template",1),n(3,"p-toolbar",2),h(4,ze,2,3,"ng-template",3)(5,Ne,5,4,"ng-template",4),l(),n(6,"p-table",5),C("onSort",function(m){return o.onSort(m)}),h(7,Re,8,6,"ng-template",1)(8,Ae,9,9,"ng-template",6)(9,qe,1,2,"ng-template",7)(10,Ge,7,4,"ng-template",8),l()(),n(11,"p-dialog",9),s(12,"translate"),s(13,"translate"),b("visibleChange",function(m){return P(o.displayDialog,m)||(o.displayDialog=m),m}),n(14,"div",10)(15,"form",11)(16,"div",12)(17,"label",13),g(18),s(19,"translate"),l(),u(20,"input",14),s(21,"translate"),h(22,He,3,2,"div",15),l(),n(23,"div",12)(24,"label",16),g(25),s(26,"translate"),l(),u(27,"p-multiselect",17),s(28,"translate"),l()()(),h(29,Je,5,8,"ng-template",18),l(),u(30,"p-toast")(31,"p-confirmDialog"),l()),t&2){let r;p("@pageAnimation",void 0),a(6),p("value",o.filteredSkills)("loading",o.loading)("scrollable",!0)("sortField",o.sortField)("sortOrder",o.sortOrder)("paginator",!0)("rows",o.rowsPerPage)("totalRecords",o.filteredSkills.length)("rowsPerPageOptions",M(41,De))("showCurrentPageReport",!0),a(5),F(M(42,Be)),p("header",o.isEditing?c(12,29,"skill.default.edit"):c(13,31,"skill.default.new")),O("visible",o.displayDialog),p("modal",!0)("draggable",!1)("resizable",!1),a(4),p("formGroup",o.skillForm),a(3),x("",c(19,33,"skill.name")," *"),a(2),p("placeholder",c(21,35,"common.enterText")),a(2),p("ngIf",((r=o.skillForm.get("name"))==null?null:r.invalid)&&((r=o.skillForm.get("name"))==null?null:r.touched)),a(3),_(c(26,37,"skill.student")),a(2),p("options",o.studentOptions)("filter",!0)("placeholder",c(28,39,"skill.selectStudent"))("showToggleAll",!0)("showHeader",!0)("maxSelectedLabels",3)}},dependencies:[V,D,B,X,H,j,G,W,U,Y,J,K,he,_e,L,fe,ke,A,R,Se,Ce,ee,$,ge,Me,ve,Oe,xe,ce,se,be,Pe,N,z,ye,Te,ue,me,ie,te,le,ne,oe,de,ae,re],styles:[".skill-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1200px;margin:0 auto}.skill-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid var(--border-color);background:var(--surface-b);border-radius:13px 13px 0 0}.skill-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-color);font-size:1.5rem;font-weight:600}.skill-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-subtitle[_ngcontent-%COMP%]{margin:0;color:var(--text-color-secondary);font-size:.9rem}.skill-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.skill-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{min-width:300px}.skill-container[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.skill-container[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]   .skill-icon[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.1rem}.skill-container[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]   .skill-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-color)}.skill-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-end}.skill-container[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--text-color-muted);font-style:italic}.skill-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:var(--text-color-secondary)}.skill-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-color-muted);margin-bottom:1rem;display:block}.skill-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.1rem}.skill-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.skill-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-color);font-size:.9rem}.skill-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .skill-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%], .skill-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   p-select[_ngcontent-%COMP%]{width:100%}.skill-container[_ngcontent-%COMP%]   .dialog-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding-top:1rem}.skill-container[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%], .skill-container[_ngcontent-%COMP%]   .skeleton-tag[_ngcontent-%COMP%], .skill-container[_ngcontent-%COMP%]   .skeleton-button[_ngcontent-%COMP%], .skill-container[_ngcontent-%COMP%]   .skeleton-icon[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--surface-c) 25%,var(--surface-d) 50%,var(--surface-c) 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s infinite;border-radius:4px}.skill-container[_ngcontent-%COMP%]   .skeleton-text[_ngcontent-%COMP%]{height:16px;width:100%}.skill-container[_ngcontent-%COMP%]   .skeleton-text.skeleton-name[_ngcontent-%COMP%]{width:120px}.skill-container[_ngcontent-%COMP%]   .skeleton-text.skeleton-email[_ngcontent-%COMP%]{width:160px}.skill-container[_ngcontent-%COMP%]   .skeleton-tag[_ngcontent-%COMP%]{height:24px;width:60px;border-radius:12px}.skill-container[_ngcontent-%COMP%]   .skeleton-tag.skeleton-small[_ngcontent-%COMP%]{width:30px}.skill-container[_ngcontent-%COMP%]   .skeleton-button[_ngcontent-%COMP%]{height:32px;width:32px;border-radius:6px}.skill-container[_ngcontent-%COMP%]   .skeleton-icon[_ngcontent-%COMP%]{height:20px;width:20px;border-radius:50%;flex-shrink:0}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:-200% 0}to{background-position:200% 0}}.skill-container[_ngcontent-%COMP%]   .input-error[_ngcontent-%COMP%]{color:#d32f2f;font-size:.85rem;margin-top:.25rem}@media (max-width: 768px){.skill-container[_ngcontent-%COMP%]{padding:1rem}.skill-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}.skill-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{min-width:auto;width:100%}.skill-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.skill-container[_ngcontent-%COMP%]     .p-dialog{width:95vw!important;margin:1rem}.skill-container[_ngcontent-%COMP%]     .p-toolbar{flex-direction:column;gap:1rem;align-items:stretch}.skill-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-left, .skill-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-right, .skill-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-center{justify-content:center}}  .dark-theme .skill-container .card-header{background:var(--surface-c);border-color:var(--border-color)}"],data:{animation:[Z]}})}};export{Ie as SkillComponent};
